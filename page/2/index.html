<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="讲道理此处应有描述，可是我不讲道理。">
<meta property="og:type" content="website">
<meta property="og:title" content="Logging的博客">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="Logging的博客">
<meta property="og:description" content="讲道理此处应有描述，可是我不讲道理。">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Logging的博客">
<meta name="twitter:description" content="讲道理此处应有描述，可是我不讲道理。">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/2/">





  <title>Logging的博客</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Logging的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">https://github.com/Renascence</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/07/18/react中的key/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Logging">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Logging的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/07/18/react中的key/" itemprop="url">react 中的key</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-07-18T16:32:54+08:00">
                2017-07-18
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>  react提供了强大的jsx语法，其中我使用最多的就是三目表达式以及map方法渲染array元素了。</p>
<p>  react动态渲染array：<br>    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array.map(item =&gt; &lt;li&gt;item&lt;/li&gt;)</span><br></pre></td></tr></table></figure></p>
<p>  这么写console里会出现warning：</p>
<pre><code>&gt; Each child in an array or iterator should have a unique &quot;key&quot; prop. 
</code></pre><p>  提示的错误很明显嘛，动态渲染的元素需要唯一的key值。遂改成<br>    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array.map((item,index) =&gt; &lt;li key=&#123;index&#125;&gt;item&lt;/li&gt;)</span><br></pre></td></tr></table></figure></p>
<p>  简直完美，页面正常渲染，console中也不会报错。</p>
<hr>
<p>  很久之前到最近我都是这么认为的。<br>  直到有一天我接到了一个需求：根据数组长度动态生成输入框，并且输入框支持删除添加操作。</p>
<p>  拿起键盘就是一把梭：<br>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">// 几个主要函数  state = &#123;list : []&#125;</span><br><span class="line"></span><br><span class="line">onInputChange = (e, index) =&gt; &#123;</span><br><span class="line">  const list = this.state.list.slice();</span><br><span class="line">  list[index] = e.target.value;</span><br><span class="line">  this.setState(&#123; list &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">onInputRemove = (index) =&gt; &#123;</span><br><span class="line">  const list = this.state.list.slice();</span><br><span class="line">  list.splice(index, 1)</span><br><span class="line">  this.setState(&#123; list &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">onInputAdd = () =&gt; &#123;</span><br><span class="line">  const list = this.state.list.slice();</span><br><span class="line">  list.push(null)</span><br><span class="line">  this.setState(&#123; list &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">render() &#123;</span><br><span class="line">  return &lt;div&gt;</span><br><span class="line">    &#123;this.state.list.map((item, index) =&gt; &lt;div key=&#123;index&#125;&gt;</span><br><span class="line">      &lt;input onChange=&#123;(e) =&gt; this.onInputChange(e,index)&#125; defaultValue=&#123;item&#125; /&gt;</span><br><span class="line">      &lt;button onClick=&#123;() =&gt; this.onInputRemove(index)&#125;&gt;删除&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;)&#125;</span><br><span class="line">    &lt;button onClick=&#123;() =&gt; this.onInputAdd()&#125;&gt;添加&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>  <img src="https://raw.githubusercontent.com/Renascence/Renascence.github.io/hexo/source/_posts/img/before.png" alt="添加了四个输入框"></p>
<p>  主要功能就这么实现了，逻辑堪称完美。<br>  直到我点击了一下删除按钮。。。发现我删除的永远是最后一个元素（图为点击第二个输入框后删除按钮出现的效果）</p>
<p>  <img src="https://raw.githubusercontent.com/Renascence/Renascence.github.io/hexo/source/_posts/img/after.png" alt="点击第二个输入框后面的删除按钮后"></p>
<p>  第一反应是我删除的index删错了，但是反复检查之后，发现逻辑并没有问题，于是研究了一番。<br>  BTW：当时是用value替换了defaultvalue，让input变为受控组件，解决了这个问题。</p>
<p>  赶快Google一波补补课。</p>
<blockquote>
<p>简单来说:react利用key来识别组件，它是一种身份标识标识。react的diff算法需要根据key的对比来实现。</p>
<ul>
<li>key相同，若组件属性有所变化，则react只更新组件对应的属性；没有变化则不更新。</li>
<li>key值不同，则react先销毁该组件(有状态组件的componentWillUnmount会执行)，然后重新创建该组件（有状态组件的constructor和componentWillUnmount都会执行）<br>也就是说，如果是同一个元素，如果需要更新状态，则赋予的key值不应该改变。</li>
</ul>
</blockquote>
<p>  根据搜到的解释以及页面上出现的现象，我理解如下：<br>  当删除了第二个输入框，通过map渲染出来的输入框 defaultValue={3} ，但是，由于通过数组map的index没有改变，都是1，所以react没有对view进行更新。// 所以让input变为受控组件，也可以解决这个问题。</p>
<p>  所以如果想通过key来解决这个问题，需要固定唯一的key就可以。<br>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">constructor(props) &#123;</span><br><span class="line">  super(props)</span><br><span class="line">  this.state = &#123;</span><br><span class="line">    list: [],</span><br><span class="line">    keys: [0],</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">onInputChange = (e, index) =&gt; &#123;</span><br><span class="line">  const list = this.state.list.slice();</span><br><span class="line">  list[index] = e.target.value;</span><br><span class="line">  this.setState(&#123; list &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">onInputRemove = (index) =&gt; &#123;</span><br><span class="line">  const list = this.state.list.slice();</span><br><span class="line">  const keys = this.state.keys.slice();</span><br><span class="line">  list.splice(index, 1);</span><br><span class="line">  const order = keys.indexOf(index)</span><br><span class="line">  keys.splice(order, 1)</span><br><span class="line">  this.setState(&#123; list, keys &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">onInputAdd = () =&gt; &#123;</span><br><span class="line">  const list = this.state.list.slice();</span><br><span class="line">  const keys = this.state.keys.slice();</span><br><span class="line">  keys.push(keys[keys.length - 1] + 1)</span><br><span class="line">  list.push(null)</span><br><span class="line">  this.setState(&#123; list, keys &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">render() &#123;</span><br><span class="line">  const keys = this.state.keys;</span><br><span class="line">  return &lt;div&gt;</span><br><span class="line">    &#123;this.state.list.map((item, index) =&gt; &lt;div key=&#123;keys[index]&#125;&gt;</span><br><span class="line">      &lt;input onChange=&#123;(e) =&gt; this.onInputChange(e, index)&#125; defaultValue=&#123;item&#125; /&gt;</span><br><span class="line">      &lt;button onClick=&#123;() =&gt; this.onInputRemove(index)&#125;&gt;删除&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;)&#125;</span><br><span class="line">    &lt;button onClick=&#123;() =&gt; this.onInputAdd()&#125;&gt;添加&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>  多维护一个数组，作为动态渲染的数组的key就可以解决。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/06/26/拥抱es6新特性之遍历/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Logging">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Logging的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/06/26/拥抱es6新特性之遍历/" itemprop="url">拥抱es6新特性之遍历</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-06-26T12:02:31+08:00">
                2017-06-26
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>以前一直使用for语法遍历array/object，es6提供了一种更优雅的方式遍历array/object。整理一下最近学习的array的原型方法。</p>
</blockquote>
<h1 id="Array"><a href="#Array" class="headerlink" title="Array"></a><a href="#Array" title="Array"></a>Array</h1><h2 id="map"><a href="#map" class="headerlink" title="map"></a><a href="#map" title="map"></a>map</h2><p>  语法：<br>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr.map(function(currentVal,index,arr) &#123;&#125;)</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>该方法会返回一个新的数组，值为callback函数返回的每一项。</p>
</blockquote>
<h2 id="reduce"><a href="#reduce" class="headerlink" title="reduce"></a><a href="#reduce" title="reduce"></a>reduce</h2><p>  语法：  </p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arr.reduce(function(val1,val2) &#123;</span><br><span class="line">&#125;,[initialValue])</span><br></pre></td></tr></table></figure>
<p>该方法会遍历数组，val1代表initialValue或者上一次执行callback的返回值，val2代表数组遍历的当前元素，通常用来求数组的和。</p>
<h2 id="every"><a href="#every" class="headerlink" title="every"></a><a href="#every" title="every"></a>every</h2><p>  语法：  </p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr.every(callback[, thisArg])</span><br></pre></td></tr></table></figure>
<blockquote>
<p>对数组的每个元素进行检查，所有元素都满足callback函数的条件，最终才返回true，否则返回值为false。</p>
</blockquote>
<h2 id="some"><a href="#some" class="headerlink" title="some"></a><a href="#some" title="some"></a>some</h2><p>  语法：<br>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr.some(callback[, thisArg])</span><br></pre></td></tr></table></figure></p>
<p>  和every对应，只要数组中有一个或者多个满足callback条件，则返回true，否则返回false。</p>
<h2 id="fill"><a href="#fill" class="headerlink" title="fill"></a><a href="#fill" title="fill"></a>fill</h2><p>  语法：  </p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">arr.fill(value)</span><br><span class="line">arr.fill(value, start)</span><br><span class="line">arr.fill(value, start, end) // start和and为可选</span><br></pre></td></tr></table></figure>
<p>  对数组进行填充，可以指定填充的开始位置和结束位置。<br>  很好用的一个函数，之前一直用for循环给数组赋初始值。</p>
<h2 id="filter"><a href="#filter" class="headerlink" title="filter"></a><a href="#filter" title="filter"></a>filter</h2><p>  语法：  </p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr.filter(callback[, thisArg])</span><br></pre></td></tr></table></figure>
<p>  该方法会返回一个新的满足callback函数条件的数组。</p>
<h2 id="find"><a href="#find" class="headerlink" title="find"></a><a href="#find" title="find"></a>find</h2><p>  语法：<br>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr.find(callback[, thisArg])</span><br></pre></td></tr></table></figure></p>
<p>  返回数组中满足callback函数条件的第一个元素的值，如果不存在则返回undefined。</p>
<h2 id="findIndex"><a href="#findIndex" class="headerlink" title="findIndex"></a><a href="#findIndex" title="findIndex"></a>findIndex</h2><p>  语法：<br>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr.findIndex(callback[, thisArg])</span><br></pre></td></tr></table></figure></p>
<p>  和indexOf()方法类似，返回第一个满足callback条件的元素下标，如果不存在则返回-1.</p>
<h2 id="forEach"><a href="#forEach" class="headerlink" title="forEach"></a><a href="#forEach" title="forEach"></a>forEach</h2><p>  语法：<br>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array.forEach(callback(currentValue, index, array)&#123;&#125;,this)</span><br></pre></td></tr></table></figure></p>
<p>  遍历数组，对数组中的每个元素进行callback中的操作。</p>
<h2 id="keys"><a href="#keys" class="headerlink" title="keys"></a><a href="#keys" title="keys"></a>keys</h2><p>  语法：  </p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr.keys()</span><br></pre></td></tr></table></figure>
<p>  返回新的arr迭代器，包含数组中所有index。<strong>包括空元素的索引</strong>。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/15/es6-新特性之set-map/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Logging">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Logging的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/05/15/es6-新特性之set-map/" itemprop="url">es6 新特性之set/map</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-05-15T23:31:24+08:00">
                2017-05-15
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p> 最近一直在使用es6的新特性，但是还没有系统地学习，写博客开始慢慢补漏～  </p>
</blockquote>
<h2 id="Set"><a href="#Set" class="headerlink" title="Set"></a><a href="#Set" title="Set"></a>Set</h2><p>  es6提供的一种新数据结构。</p>
<p>  和数组类似，但是中间不允许存在重复的值。</p>
<p>  区别于数组的push，向set集合中添加元素需要使用add方法。<br>  获取长度使用set.size()函数，而不是length。<br>  set.has()函数用于判断集合中是否含有某一个元素。</p>
<ul>
<li><p>数组和集合的转化：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let array = Array.from(sets);</span><br></pre></td></tr></table></figure>
<p>集合没有特定的key，所以访问‘键’和‘值’获取到的数据是一致的。</p>
</li>
</ul>
<h2 id="Map"><a href="#Map" class="headerlink" title="Map"></a><a href="#Map" title="Map"></a>Map</h2><p>  和object类似，但是传入的key不需要是string类型。</p>
<ul>
<li><p>基本方法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">size    // 返回成员总数</span><br><span class="line">set(key,val)</span><br><span class="line">get(key)</span><br><span class="line">hsa(key)     </span><br><span class="line">delete(key)  </span><br><span class="line">clear  // 清空map</span><br></pre></td></tr></table></figure>
<p><strong>只有对同一个对象的引用，Map结构才将其视为同一个键。</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var map = new Map();</span><br><span class="line">map.set([&apos;a&apos;], 555);</span><br><span class="line">map.get([&apos;a&apos;]) // undefined</span><br></pre></td></tr></table></figure>
<p><strong>同样的值的两个实例，在Map结构中被视为两个键。</strong></p>
</li>
<li><p>Map转为数组</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let arr = [...myMap]</span><br></pre></td></tr></table></figure>
</li>
<li><p>遍历map</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for (let [k,v] of strMap) &#123;</span><br><span class="line">  // do something with key &amp;val</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/25/初试MongoDB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Logging">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Logging的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/04/25/初试MongoDB/" itemprop="url">初试MongoDB</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-04-25T22:40:08+08:00">
                2017-04-25
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="mongodb-简介"><a href="#mongodb-简介" class="headerlink" title="mongodb 简介"></a><a href="#mongodb-简介" title="mongodb 简介"></a>mongodb 简介</h2><p>  MongoDB 是由C++语言编写的，是一个基于分布式文件存储的开源数据库系统。<br>  之前使用mysql比较多，mysql的某些术语在mongodb中有另外一个术语与之对应。</p>
<table>
<thead>
<tr>
<th>SQL术语/概念</th>
<th>MongoDB术语/概念</th>
<th>解释/说明</th>
</tr>
</thead>
<tbody>
<tr>
<td> database</td>
<td>database</td>
<td>数据库</td>
</tr>
<tr>
<td> table</td>
<td>collection</td>
<td>数据库表/集合</td>
</tr>
<tr>
<td>row</td>
<td>document</td>
<td>数据记录行/文档</td>
</tr>
<tr>
<td>column</td>
<td>field</td>
<td>数据字段/域</td>
</tr>
<tr>
<td>index</td>
<td>index</td>
<td>索引</td>
</tr>
<tr>
<td>table joins</td>
<td>表连接,MongoDB不支持</td>
<td>-</td>
</tr>
<tr>
<td>primary key</td>
<td>primary key</td>
<td>主键,MongoDB自动将_id字段设置为主键</td>
</tr>
</tbody>
</table>
<h2 id="mongodb-安装"><a href="#mongodb-安装" class="headerlink" title="mongodb 安装"></a><a href="#mongodb-安装" title="mongodb 安装"></a>mongodb 安装</h2><p>操作系统：ubuntu 16.04</p>
<ol>
<li><p>导入包管理系器使用的公钥：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv 0C49F3730359A14518585931BC711F9BA15703C6</span><br></pre></td></tr></table></figure>
</li>
<li><p>为mongodb创建一个列表：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;deb [ arch=amd64,arm64 ] http://repo.mongodb.org/apt/ubuntu xenial/mongodb-org/3.4 multiverse&quot; | sudo tee/etc/apt/sources.list.d/mongodb-org-3.4.list</span><br></pre></td></tr></table></figure>
</li>
<li><p>更新包管理区的软件列表：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br></pre></td></tr></table></figure>
</li>
<li><p>mongodb 安装：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install -y mongodb-org</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="mongodb-服务控制"><a href="#mongodb-服务控制" class="headerlink" title="mongodb 服务控制"></a><a href="#mongodb-服务控制" title="mongodb 服务控制"></a>mongodb 服务控制</h2><ol>
<li><p>启动：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service mongod start</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看mongodb 状态：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service mongod status</span><br></pre></td></tr></table></figure>
</li>
<li><p>停止：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service mongod stop</span><br></pre></td></tr></table></figure>
</li>
<li><p>重启：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service mongod restart</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="mongodb-常用操作"><a href="#mongodb-常用操作" class="headerlink" title="mongodb 常用操作"></a><a href="#mongodb-常用操作" title="mongodb 常用操作"></a>mongodb 常用操作</h2><ol>
<li><p>新建mongodb存储的文件路径</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /data/db</span><br></pre></td></tr></table></figure>
<p>/data/db 是 MongoDB 默认的启动的数据库路径(–dbpath),安装过程中不会自动创建，需要手动创建。</p>
</li>
<li><p>执行 <strong>mongo</strong> 可以进入mongodb shell</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use DATABASE_NAME</span><br></pre></td></tr></table></figure>
<p>如果数据库不存在，则创建数据库，否则切换到指定数据库。</p>
</li>
<li><p>如果需要删除数据库，在use 该数据库后执行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.dropDatabase()</span><br></pre></td></tr></table></figure>
<p>然后通过<strong>show dbs</strong>查看是否删除成功</p>
</li>
</ol>
<h2 id="在nodejs中使用mongodb"><a href="#在nodejs中使用mongodb" class="headerlink" title="在nodejs中使用mongodb"></a><a href="#在nodejs中使用mongodb" title="在nodejs中使用mongodb"></a>在nodejs中使用mongodb</h2><p>  因为主要是用nodejs进行开发，所以就介绍在nodejs平台使用mongodb了。</p>
<p>  首先需要通过npm安装mongodb</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install mongodb</span><br></pre></td></tr></table></figure>
<p>  这个是官方提供的库，我们可以使用对其封装过之后的orm方便开发，在查阅资料之后，我选择了<a href="https://github.com/amark/mongous" target="_blank" rel="noopener">mongous</a>,语法简洁，容易使用。</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install mongojs</span><br></pre></td></tr></table></figure>
<p>  新建index.js文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">const mongojs = require(&apos;mongojs&apos;);</span><br><span class="line">const JSONStream = require(&apos;JSONStream&apos;) </span><br><span class="line">const db = mongojs(&apos;logging&apos;, [&apos;mycollection&apos;]) // logging 是数据库名 </span><br><span class="line">// save data </span><br><span class="line">db.mycollection.save(&#123; </span><br><span class="line">  name: &apos;logging&apos;, </span><br><span class="line">  age:24 </span><br><span class="line">&#125;) </span><br><span class="line">//get </span><br><span class="line">db.mycollection.find((err,docs)=&gt; &#123; </span><br><span class="line">  console.log(docs) </span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">//通过id查找数据 并通过流输出到控制台 </span><br><span class="line">db.mycollection.find(&#123;_id: mongojs.ObjectId(&apos;58e9ebfa53d28433350c70e7&apos;)&#125;).pipe(JSONStream.stringify()).pipe(process.stdout) </span><br><span class="line"></span><br><span class="line">//增加条件查询语句 </span><br><span class="line">db.mycollection.find(&#123;&quot;age&quot; : &#123;$gt : 100&#125;&#125;) </span><br><span class="line"></span><br><span class="line">// update </span><br><span class="line">db.mycollection.findAndModify(&#123; </span><br><span class="line">  query: &#123; name: &apos;logging&apos; &#125;, </span><br><span class="line">  update: &#123; $set: &#123; age: 23 &#125;&#125;,  </span><br><span class="line">  new: true </span><br><span class="line">&#125;, function (err, doc, lastErrorObject) &#123; </span><br><span class="line">&#125;) </span><br><span class="line"></span><br><span class="line">// delete </span><br><span class="line">db.mycollection.remove(&#123;age:23&#125;)</span><br></pre></td></tr></table></figure>
<p>  执行<strong>node index.js </strong>可以看到输出结果</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a><a href="#参考" title="参考"></a>参考</h2><p><a href="https://docs.mongodb.com/manual" target="_blank" rel="noopener">mongodb 文档</a><br><a href="http://www.runoob.com/mongodb/mongodb-tutorial.html" target="_blank" rel="noopener">mongodb 教程</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/07/个人博客建立～/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Logging">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Logging的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/04/07/个人博客建立～/" itemprop="url">个人博客建立～</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-04-07T10:33:27+08:00">
                2017-04-07
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>刚刚建立个人博客，没啥新的文章，搬点旧文章凑个数（囧）</p>
<h3 id="SailsJS连接mysql数据库"><a href="#SailsJS连接mysql数据库" class="headerlink" title="SailsJS连接mysql数据库"></a><a href="#SailsJS连接mysql数据库" title="SailsJS连接mysql数据库"></a><a href="http://blog.csdn.net/genius_s_/article/details/51429280" target="_blank" rel="noopener">SailsJS连接mysql数据库</a></h3><h3 id="js实现的简单网页贪吃蛇"><a href="#js实现的简单网页贪吃蛇" class="headerlink" title="js实现的简单网页贪吃蛇"></a><a href="#js实现的简单网页贪吃蛇" title="js实现的简单网页贪吃蛇"></a><a href="http://blog.csdn.net/genius_s_/article/details/48396593" target="_blank" rel="noopener">js实现的简单网页贪吃蛇</a></h3><h3 id="getElementsByClassName的低版本浏览器兼容方法"><a href="#getElementsByClassName的低版本浏览器兼容方法" class="headerlink" title="getElementsByClassName的低版本浏览器兼容方法"></a><a href="#getElementsByClassName的低版本浏览器兼容方法" title="getElementsByClassName的低版本浏览器兼容方法"></a><a href="http://blog.csdn.net/genius_s_/article/details/46843741" target="_blank" rel="noopener">getElementsByClassName的低版本浏览器兼容方法</a></h3><h3 id="Python的几个小程序"><a href="#Python的几个小程序" class="headerlink" title="Python的几个小程序"></a><a href="#Python的几个小程序" title="Python的几个小程序"></a><a href="http://blog.csdn.net/genius_s_/article/details/46010669" target="_blank" rel="noopener">Python的几个小程序</a></h3>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Logging</p>
              <p class="site-description motion-element" itemprop="description">讲道理此处应有描述，可是我不讲道理。</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">15</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">8</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
          </div>

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Logging</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  








  





  

  

  

  

  

  

</body>
</html>
